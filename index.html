<!--
CollorGuessr - Color Guessing Game
Copyright (C) 2026 Igor 'x0derek' Karpowicz

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published
by the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>ColorGuessr</title>
</head>
<body>
    <div id="main">
        <span id="title">COLORGUESSR</span>
        <div id="languagebox">
            <button id="language" class="language">LANGUAGE</button>
            <button disabled id="eng" class="language hidden">ENG</button>
            <button disabled id="esp" class="language hidden">ESP</button>
            <button disabled id="pl" class="language hidden">PL</button>
            <button disabled id="ger" class="language hidden">GER</button>
        </div>
        <div class="box">
            <div id="box1"></div>
            <div id="guessbox">
                <span id="info">Guess The Color</span>
                <input type="text" name="guess" id="guess" placeholder="for example: 00FF00" maxlength="6" pattern="[0-9A-Fa-f]{6}$">
                <input type="button" value="Submit" id="submit">
                <input type="button" value="Play Again" id="NewGame" style="display:none;">
                <div id="lastGuessContainer">
                    <span id="lastGuessInfo">Your guess:</span><br>
                    <span id="lastGuessText"></span>
                    <div id="lastGuessBox"></div>
                </div>
            </div>
        </div>
    </div>

<script>
    let targetColor = '';
    let attempts = 0;
    let currentLanguage = 'eng';

    function generateRandomColor() {
        const letters = '0123456789ABCDEF';
        let color = '#';
        for (let i = 0; i < 6; i++) {
            color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
    }

    function startGame() {
        targetColor = generateRandomColor();
        document.getElementById('box1').style.backgroundColor = targetColor;
        attempts = 0;
        document.getElementById('info').textContent = 'Guess The Color';
        document.getElementById('guess').value = '';
        document.getElementById('lastGuessContainer').style.display = 'none';
        document.getElementById('submit').style.display = 'block';
        document.getElementById('NewGame').style.display = 'none';
        document.getElementById('guess').focus();
    }

    document.getElementById('submit').addEventListener('click', function() {
        let userGuess = document.getElementById('guess').value.toUpperCase();
        
        if (!userGuess.startsWith('#')) {
            userGuess = '#' + userGuess;
        }
        
        attempts++;

        if (userGuess === targetColor) {
            document.getElementById('info').textContent = `Correct in ${attempts} attempt${attempts > 1 ? 's' : ''}`;
            document.getElementById('lastGuessInfo').textContent = 'Your Guess:';
            document.getElementById('lastGuessText').textContent = targetColor;
            document.getElementById('lastGuessBox').style.backgroundColor = targetColor;
            document.getElementById('lastGuessContainer').style.display = 'block';
            document.getElementById('submit').style.display = 'none';
            document.getElementById('NewGame').style.display = 'block';
            document.getElementById('guess').value = '';
        } else {
            document.getElementById('info').textContent = 'Incorrect. Try again!';
            document.getElementById('lastGuessText').textContent = userGuess;
            document.getElementById('lastGuessBox').style.backgroundColor = userGuess;
            document.getElementById('lastGuessContainer').style.display = 'block';
            document.getElementById('guess').value = '';
        }
    });

    document.getElementById('NewGame').addEventListener('click', startGame);

    document.getElementById('guess').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            document.getElementById('submit').click();
        }
    });

    startGame();

    const languageButtons = document.getElementsByClassName('language');
    const info = document.getElementById('info');
    const lastGuessInfo = document.getElementById('lastGuessInfo');
    const languagebox = document.getElementById('languagebox');
    const languageButton = document.getElementById('language');

    const translations = {
        eng: { info: 'Guess The Color', lastGuessInfo: 'Your Color:', name: 'ENG' },
        esp: { info: 'Adivina el color', lastGuessInfo: 'Tu color:', name: 'ESP' },
        pl: { info: 'Zgadnij kolor', lastGuessInfo: 'Tw√≥j kolor:', name: 'PL' },
        ger: { info: 'Errate die Farbe', lastGuessInfo: 'Deine Farbe:', name: 'GER' }
    };

function hideLanguages() {
    for (let i = 1; i < languageButtons.length; i++) {
        languageButtons[i].classList.add('hidden');
        languageButtons[i].disabled = true;
    }
}
    function setLanguage(lang) {
        currentLanguage = lang;
        info.textContent = translations[lang].info;
        lastGuessInfo.textContent = translations[lang].lastGuessInfo;
        languageButton.textContent = translations[lang].name;
        hideLanguages();
    }

    languageButton.addEventListener('mouseover', function() {
        for (let i = 1; i < languageButtons.length; i++) {
            languageButtons[i].classList.remove('hidden');
            languageButtons[i].disabled = false;
        }
    });

    languagebox.addEventListener('mouseleave', hideLanguages);

    Object.keys(translations).forEach(lang => {
        document.getElementById(lang).addEventListener('click', () => setLanguage(lang));
    });

    // Set English as default
    setLanguage('eng');
</script>
</body>
</html>